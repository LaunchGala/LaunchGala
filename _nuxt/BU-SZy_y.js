import{_ as H}from"./CAGr1_u3.js";import{v as I,r as x,p as D,b_ as G,o as f,c as g,a as e,F as A,l as S,n as $,t as p,j as r,L as q,B as O,P as z,b as s,bT as Y,_ as N,w as o,d as _,k as J,e as j,g as K,s as Q,m as U,H as W,I as X}from"./DC9Rc9iq.js";import{_ as Z}from"./Dd2TOZVD.js";import{_ as ee}from"./BDoLV9B3.js";import{_ as se}from"./C780-bQF.js";import{u as te}from"./BIqn4ldw.js";import{S as re}from"./dFy0XW8e.js";import{_ as ae,a as oe,b as le}from"./CK7pK-tQ.js";import{C as ne}from"./CFOq92T5.js";import{a as ie,b as de,c as ue,d as C,_ as ce}from"./adsFSko6.js";import{_ as me}from"./B2TodmND.js";import{G as fe}from"./C8oN0P2Z.js";import{M as ge}from"./DiKYRENL.js";import{F as he,T as ve,Y as xe}from"./CQk6bwfR.js";import{I as pe}from"./Bt1RLF7j.js";import{L as _e}from"./jkofnJER.js";import"./DA4wcUAO.js";import"./CTK7iZ3v.js";import"./7MFG6L_t.js";import"./BPqtNpMU.js";const be={class:"flex h-full w-full bg-gray-100"},ye={class:"w-1/3 bg-white border-r"},we={class:"overflow-y-auto h-[calc(100%-4rem)]"},ke=["onClick"],Ce={class:"flex items-center"},$e={class:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold"},Me={class:"ml-3 font-medium"},Ve={class:"w-2/3 flex-1 flex flex-col h-full"},Ee={class:"bg-white border-b p-4 flex items-center"},Le={class:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold"},Ae={class:"ml-3 text-xl font-semibold"},Se={class:"text-sm"},Ue={class:"p-4 bg-white border-t"},Ie={type:"submit",class:"bg-orange-500 text-white rounded-r-lg px-4 py-2 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500"},Ne={__name:"ConversationManager",setup(b){const i=I(),a=x([]),d=x(null),t=x([]),n=x(""),h=te(),y=x(null);let w=null;const M=async()=>{const{data:c,error:m}=await h.from("Conversations").select("id, current_user_id, other_user_id, other_user_name, last_message, unread_count, updated_at").or(`current_user_id.eq.${i.value.id},other_user_id.eq.${i.value.id}`).order("updated_at",{ascending:!1});m?console.error("Error fetching conversations:",m):a.value=c.map(l=>({id:l.id,otherUserId:l.current_user_id===i.value.id?l.other_user_id:l.current_user_id,otherUserName:l.other_user_name,lastMessage:l.last_message,unreadCount:l.unread_count,updatedAt:l.updated_at}))},V=async c=>{d.value=c;const{data:m,error:l}=await h.from("Messages").select("*").eq("conversation_id",c.id).order("created_at",{ascending:!0});l?console.error("Error fetching messages:",l):(t.value=m,T(),B(c.id))},B=async c=>{const{error:m}=await h.from("Messages").update({read:!0}).eq("conversation_id",c).eq("receiver_id",i.value.id);if(m)console.error("Error marking messages as read:",m);else{const l=a.value.find(v=>v.id===c);l&&(l.unreadCount=0)}},T=async()=>{await Y(),y.value&&(y.value.scrollTop=y.value.scrollHeight)},R=async()=>{if(n.value.trim()!=="")try{const{error:c}=await h.from("Messages").insert({conversation_id:d.value.id,sender_id:i.value.id,receiver_id:d.value.otherUserId,content:n.value.trim(),read:!1});c?console.error("Error sending message:",c):(n.value="",await V(d.value))}catch(c){console.error("Error sending message:",c)}},F=()=>{w=h.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"Messages"},c=>{const m=c.new,l=a.value.find(v=>v.id===m.conversation_id);l?(l.lastMessage=m.content,m.receiver_id===i.value.id&&(l.unreadCount+=1)):M()}).subscribe()},P=()=>{w&&(h.removeChannel(w),w=null)};return D(()=>{M(),F()}),G(()=>{P()}),(c,m)=>{var l,v,E;return f(),g("div",be,[e("div",ye,[m[1]||(m[1]=e("div",{class:"p-4 bg-orange-500 text-white"},[e("h2",{class:"text-xl font-semibold"},"Conversations")],-1)),e("ul",we,[(f(!0),g(A,null,S(a.value,u=>{var k,L;return f(),g("li",{key:u.id,onClick:rs=>V(u),class:$(["p-4 hover:bg-gray-100 cursor-pointer transition-colors duration-200",{"bg-orange-100":((k=d.value)==null?void 0:k.id)===u.id,"font-bold text-blue-600":u.unreadCount>0}])},[e("div",Ce,[e("div",$e,p((L=u==null?void 0:u.otherUserName)==null?void 0:L.charAt(0)),1),e("span",Me,p(u==null?void 0:u.otherUserName),1)])],10,ke)}),128))])]),e("div",Ve,[e("div",Ee,[e("div",Le,p((v=(l=d.value)==null?void 0:l.otherUserName)==null?void 0:v.charAt(0)),1),e("h2",Ae,p((E=d.value)==null?void 0:E.otherUserName),1)]),e("div",{class:"flex-1 p-4 w-full overflow-y-auto space-y-4",ref_key:"messagesContainer",ref:y},[(f(!0),g(A,null,S(t.value,(u,k)=>(f(),g("div",{key:k,class:$(["flex",{"justify-end":u.sender_id===r(i).id}])},[e("div",{class:$(["rounded-lg p-3 max-w-full md:max-w-[70%] break-words",{"bg-orange-500 text-white":u.sender_id===r(i).id,"bg-gray-100":u.sender_id!==r(i).id}]),style:{"word-wrap":"break-word","overflow-wrap":"break-word"}},[e("p",Se,p(u.content),1)],2)],2))),128))],512),e("div",Ue,[e("form",{onSubmit:q(R,["prevent"]),class:"flex items-center"},[O(e("input",{"onUpdate:modelValue":m[0]||(m[0]=u=>n.value=u),type:"text",placeholder:"Type a message...",class:"flex-1 border rounded-l-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500"},null,512),[[z,n.value]]),e("button",Ie,[s(r(re),{class:"h-5 w-5"})])],32)])])])}}},je={key:0,class:"absolute top-0 right-0 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded-full"},Be={class:"h-[50vh] w-full"},Te={__name:"MessagesButton",setup(b){const i=x(!1);return(a,d)=>(f(),g("div",null,[s(r(le),{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=t=>i.value=t)},{default:o(({})=>[s(r(ae),{asChild:""},{default:o(()=>[s(r(se),{class:"fixed bottom-4 right-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",onClick:d[0]||(d[0]=t=>i.value=!0)},{default:o(()=>d[2]||(d[2]=[_(" Messages ")])),_:1}),a.unreadCount>0?(f(),g("span",je,p(a.unreadCount),1)):J("",!0)]),_:1}),s(r(oe),{class:"max-w-2xl flex flex-1"},{default:o(()=>[e("div",Be,[s(Ne)])]),_:1})]),_:1},8,["modelValue"])]))}},Re=N(Te,[["__scopeId","data-v-c7f8822b"]]),Fe={class:"w-full h-16 flex items-center justify-between px-2 headerMain shadow-md"},Pe={class:"hidden lg:flex gap-7 ml-18"},He=j({__name:"Header",setup(b){const i=I(),a=K(()=>i.value!==null);return(d,t)=>{const n=H,h=Q("spam");return f(),g("div",Fe,[t[13]||(t[13]=e("a",{class:"flex items-center gap-1 font-semibold text-sm",href:"/",rel:"ugc"},[e("img",{src:Z,class:"w-16 h-16"}),e("span",{class:"colorOrange"},"Launch Gala")],-1)),e("nav",Pe,[s(n,{to:"AllVenues"},{default:o(()=>t[0]||(t[0]=[e("a",{class:"text-sm font-semibold hover:underline"}," Venues ",-1)])),_:1}),s(n,{to:"AllVolunteers"},{default:o(()=>t[1]||(t[1]=[e("a",{class:"text-sm font-semibold hover:underline"}," Volunteers ",-1)])),_:1}),s(n,{to:"FoundersAndStartups"},{default:o(()=>t[2]||(t[2]=[e("a",{class:"text-sm font-semibold hover:underline"}," Startups ",-1)])),_:1}),s(n,{to:"AllSpeakers"},{default:o(()=>t[3]||(t[3]=[e("a",{class:"text-sm font-semibold hover:underline"}," Experts/Investors ",-1)])),_:1}),s(n,{to:"VendorRegs"},{default:o(()=>t[4]||(t[4]=[e("a",{class:"text-sm font-semibold hover:underline"}," Vendors ",-1)])),_:1}),s(n,{to:"AllMedia"},{default:o(()=>t[5]||(t[5]=[e("a",{class:"text-sm font-semibold hover:underline"}," Influencers ",-1)])),_:1}),s(n,{to:"AllCommunities"},{default:o(()=>t[6]||(t[6]=[e("a",{class:"text-sm font-semibold hover:underline"}," Talents ",-1)])),_:1}),s(n,{to:"LaunchAI"},{default:o(()=>t[7]||(t[7]=[e("a",{class:"text-sm font-semibold hover:underline"}," Launch AI ",-1)])),_:1}),s(n,{to:"AllEvents"},{default:o(()=>t[8]||(t[8]=[e("a",{class:"text-sm font-semibold hover:underline"}," Events ",-1)])),_:1})]),s(n,{to:"CreateEvent"},{default:o(()=>t[9]||(t[9]=[e("button",{class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-white text-black hover:underline h-10 px-4 py-2 mr-4"}," + Create Event ",-1)])),_:1}),s(r(ee),{class:"bg-orange-200 text-orange-600 dark:bg-orange-800 dark:text-orange-100 py-1 px-3 rounded-full text-xs mr-4 hover:bg-orange-500 hover:text-white"},{default:o(()=>[s(r(ne),{class:"w-5 h-5 text-orange-500 hover:text-orange-300"}),s(h,{class:"text-md ml-1"},{default:o(()=>t[10]||(t[10]=[_("Pro")])),_:1})]),_:1}),t[14]||(t[14]=e("span",{class:"absolute top-5 right-24 -mt-3 mr-4 bg-white text-orange-500 rounded-full text-xs px-1"}," 11 ",-1)),r(a)?(f(),U(n,{key:1,to:"UserDashboard"},{default:o(()=>t[12]||(t[12]=[e("button",{class:"inline-flex items-center justify-center border whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none border-orange-500 bg-white text-orange-500 hover:bg-orange-500 hover:text-white h-10 px-4 py-2 ml-auto"}," Dashboard ",-1)])),_:1})):(f(),U(n,{key:0,to:"logIn"},{default:o(()=>t[11]||(t[11]=[e("button",{class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-orange-500 text-primary-foreground hover:bg-orange-400 h-10 px-4 py-2 ml-auto"}," Login ",-1)])),_:1})),s(Re)])}}}),De={class:"bg-gray-100 dark:bg-black text-gray-700 dark:text-white"},Ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-8"},qe={class:"flex flex-col md:flex-row justify-between items-center md:items-start"},Oe={class:"flex justify-between lg:justify-start space-x-6 py-4 border-t md:border-t-0 border-gray-300"},ze={class:"inline-flex items-center"},Ye={class:"inline-flex items-center"},Je={class:"flex justify-between space-x-6 py-4 border-t border-gray-300"},Ke={href:"#"},Qe={href:"https://twitter.com/LaunchGala"},We={href:"https://www.instagram.com/launchgala/"},Xe={href:"#"},Ze={href:"https://www.linkedin.com/company/launch-gala/"},es=j({__name:"Footer",setup(b){return(i,a)=>(f(),g("footer",De,[e("div",Ge,[a[6]||(a[6]=W('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-x-10 gap-y-8"><div><h3 class="font-bold text-lg mb-4">Company</h3><ul><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">About Us</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Careers</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Press</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Blog</a></li></ul></div><div><h3 class="font-bold text-lg mb-4">Community</h3><ul><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Ambassador program</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Become our Partner</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Inclusion &amp; Diversity</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Refer a Friend</a></li></ul></div><div><h3 class="font-bold text-lg mb-4">Host</h3><ul><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Provide a Venue</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Host an Event</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Responsible Hosting</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Resource Center</a></li></ul></div><div><h3 class="font-bold text-lg mb-4">Support</h3><ul><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Our COVID-19 Response</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Help Center</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Reservation Rules</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Neighborhood Support</a></li></ul></div><div><h3 class="font-bold text-lg mb-4">Legal &amp; Privacy</h3><ul><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Privacy Policy</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Terms of Service</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">EU &amp; Global Compliance</a></li><li class="mb-2"><a href="#" class="hover:text-gray-900 dark:hover:text-gray-300">Cookies &amp; Other Policies</a></li></ul></div></div>',1)),e("div",qe,[e("div",Oe,[e("span",ze,[s(r(fe),{class:"mr-1 h-4 w-4"}),s(r(ce),{class:"inline-block"},{default:o(()=>[s(r(ie),null,{default:o(()=>[s(r(de),{placeholder:"English"})]),_:1}),s(r(ue),null,{default:o(()=>[s(r(me),null,{default:o(()=>[s(r(C),{value:"english"},{default:o(()=>a[0]||(a[0]=[_(" English ")])),_:1}),s(r(C),{value:"german"},{default:o(()=>a[1]||(a[1]=[_(" Deutsch ")])),_:1}),s(r(C),{value:"french"},{default:o(()=>a[2]||(a[2]=[_(" Français ")])),_:1}),s(r(C),{value:"spanish"},{default:o(()=>a[3]||(a[3]=[_(" Español ")])),_:1})]),_:1})]),_:1})]),_:1})]),e("span",Ye,[s(r(ge),{class:"mr-1 h-4 w-4"}),a[4]||(a[4]=e("button",{class:"hover:text-gray-900 dark:hover:text-gray-300"},"Get Newsletters",-1))])]),a[5]||(a[5]=e("p",{class:"py-4 border-t border-gray-300 text-center md:text-left"},"© 2024 Meta Bang LLC",-1)),e("div",Je,[e("a",Ke,[s(r(he),{class:"h-6 w-6 hover:text-gray-900 dark:hover:text-gray-300"})]),e("a",Qe,[s(r(ve),{class:"h-6 w-6 hover:text-gray-900 dark:hover:text-gray-300"})]),e("a",We,[s(r(pe),{class:"h-6 w-6 hover:text-gray-900 dark:hover:text-gray-300"})]),e("a",Xe,[s(r(xe),{class:"h-6 w-6 hover:text-gray-900 dark:hover:text-gray-300"})]),e("a",Ze,[s(r(_e),{class:"h-6 w-6 hover:text-gray-900 dark:hover:text-gray-300"})])])])])]))}}),ss={};function ts(b,i){const a=He,d=es;return f(),g("div",null,[s(a,{class:"sticky top-0 z-50"}),X(b.$slots,"default"),s(d)])}const Cs=N(ss,[["render",ts]]);export{Cs as default};
